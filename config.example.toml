# Blockhost Broker Configuration

[broker]
# Upstream prefix allocated from Route64
upstream_prefix = "2a11:6c7:f04:276::/64"

# Size of allocations to hand out (/120 = 256 addresses per host)
allocation_size = 120

# Broker's own IPv6 address
broker_ipv6 = "2a11:6c7:f04:276::2"

[wireguard]
# Interface name for downstream peers
interface = "wg-broker"

# Listen port
listen_port = 51820

# Private key file path
private_key_file = "/etc/blockhost-broker/wg-private.key"

# Public endpoint for clients to connect to (your VPS IP:port)
public_endpoint = "YOUR_SERVER_IP:51820"

[api]
# Listen address and port
listen_host = "0.0.0.0"
listen_port = 8080

[database]
# SQLite database path
path = "/var/lib/blockhost-broker/ipam.db"

[onchain]
# Enable on-chain broker authentication (disables REST API allocations)
# When enabled, allocation requests are made through the BrokerRequests
# smart contract instead of the REST API.
enabled = false

# Ethereum RPC URL (Sepolia testnet)
rpc_url = "https://ethereum-sepolia-rpc.publicnode.com"

# Chain ID (11155111 = Sepolia)
chain_id = 11155111

# Path to file containing operator wallet private key (hex, with or without 0x)
# This wallet must be the owner of the BrokerRequests contract
private_key_file = "/etc/blockhost-broker/deployer.key"

# Path to file containing ECIES private key (hex, secp256k1)
# Generate with: blockhost-broker --generate-ecies-key /etc/blockhost-broker/ecies.key
ecies_private_key_file = "/etc/blockhost-broker/ecies.key"

# BrokerRegistry contract address (Sepolia)
registry_contract = "0x4bfA5E3B23ea65451f5f430B573930ff5FfF5074"

# BrokerRequests contract address (Sepolia)
# This is your broker's instance of the BrokerRequests contract
requests_contract = "0x43880eA324BF7842A72a9ed0680B3dd1cD6CD7C8"

# Poll interval for pending requests (milliseconds)
# How often to check for new allocation requests on-chain
poll_interval_ms = 5000
